import{ref as e,onMounted as t,onUnmounted as n}from"vue";function a(a){const r=e(!1);let o=null;const s=()=>{o&&(o.terminate(),o=null,r.value=!1)};return t((()=>{})),n((()=>{s()})),[(...e)=>(o||(o=(()=>{const e=a.toString(),t=new Blob([`onmessage = async (e) => { postMessage(await (${e})(...e.data)); };`],{type:"application/javascript"});return new Worker(URL.createObjectURL(t))})()),r.value=!0,new Promise(((t,n)=>{o&&(o.onmessage=e=>{r.value=!1,t(e.data)},o.onerror=e=>{r.value=!1,n(e)},o.postMessage(e))}))),{isRunning:r,terminateWorker:s}]}export{a as useWorker};
